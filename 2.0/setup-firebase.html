<!doctype html>
<html>
    
<head>
        
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Setting up Firebase | FireApp</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        
        <meta name="author" content="">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="twitter:card" value="summary">
                    <link rel="canonical" href="http://2.0/setup-firebase" />
                                                                                            <meta property="og:type" content="article" />
                                                                                                                        
        
        <link rel="stylesheet" href="../vendor/binarytorch/larecipe/assets/css/app.css">

        
        <link rel="apple-touch-icon" href="//images/favicon.ico">
<link rel="shortcut icon" type="image/png" href="//images/favicon.ico"/>
        
        
        <style>
    :root {
        --primary: #787AF6;
        --secondary: #2b9cf2;
    }

    :not(pre)>code[class*=language-], pre[class*=language-] {
        border-top: 3px solid #787AF6;
    }
    
    .bg-gradient-primary {
        background: linear-gradient(87deg, #787AF6 0, #2b9cf2 100%) !important;
    }

    [v-cloak] > * { 
        display: none; 
    }
    
    [v-cloak]::before { 
        content: " ";
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #F2F6FA;
    }
</style>
        <!-- CSRF Token -->
        <meta name="csrf-token" content="xWufmeFvKgtGACwcii247vd5477GSXCZoqnqb1Rp">

            </head>
    <body>
        <div id="app" v-cloak>
            <div class="fixed pin-t pin-x z-40">
    <div class="bg-gradient-primary text-white h-1"></div>
    
    <nav class="flex items-center justify-between text-black bg-navbar shadow-xs h-16">
        <div class="flex items-center flex-no-shrink">
           <a href="" class="flex items-center flex-no-shrink text-black mx-4">
                <!-- <svg height="30px" viewBox="0 0 46 46" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Jelly-icons" transform="translate(-647.000000, -437.000000)" fill-rule="nonzero">
            <g id="coupon" transform="translate(640.000000, 430.000000)">
                <rect id="range" fill="#000000" opacity="0" x="0" y="0" width="60" height="60"></rect>
                <path d="M7.67578125,12.7324219 L7.67578125,43.78125 C7.67578125,49.4414062 10.4765625,51.1289062 10.4765625,51.1289062 C12.0234375,52.6699219 14.53125,52.6699219 16.078125,51.1289062 C17.625,49.5878906 20.1328125,49.5878906 21.6796875,51.1289062 C23.2265625,52.6699219 25.734375,52.6699219 27.28125,51.1289062 C28.828125,49.5878906 31.3359375,49.5878906 32.8828125,51.1289062 C34.4296875,52.6699219 36.9375,52.6699219 38.484375,51.1289062 C40.03125,49.5878906 42.5390625,49.5878906 44.0859375,51.1289062 C45.6328125,52.6699219 48.140625,52.6699219 49.6875,51.1289062 C49.6875,51.1289062 52.4882812,49.2128906 52.4882812,43.78125 C52.4882812,38.3496094 52.4765625,12.7324219 52.4765625,12.7324219 C52.4765625,9.83789063 50.1152344,7.49414063 47.2089844,7.49414063 L12.9316406,7.49414063 C10.0371094,7.49414063 7.67578125,9.83789063 7.67578125,12.7324219 Z" id="appearance" fill="#787AF6"></path>
                <path d="M17.3261719,16.5996094 C16.2011719,16.5996094 15.2871094,17.5136719 15.2871094,18.6386719 L15.2871094,21.2109375 C15.2871094,22.3359375 16.2011719,23.25 17.3261719,23.25 L45.8496094,23.25 C46.9746094,23.25 47.8886719,22.3359375 47.8886719,21.2109375 L47.8886719,18.6386719 C47.8886719,17.5136719 46.9746094,16.5996094 45.8496094,16.5996094 L17.3261719,16.5996094 Z M29.5488281,27.8085938 L17.3261719,27.8085938 C16.2011719,27.8085938 15.2871094,27.9726562 15.2871094,29.0976562 C15.2871094,30.2226562 16.2011719,30.3867188 17.3261719,30.3867188 L29.5488281,30.3867188 C30.6738281,30.3867188 31.5878906,30.2226562 31.5878906,29.0976562 C31.5878906,27.9726562 30.6738281,27.8085938 29.5488281,27.8085938 Z M29.5488281,34.9394531 L17.3261719,34.9394531 C16.2011719,34.9394531 15.2871094,35.1035156 15.2871094,36.2285156 C15.2871094,37.3535156 16.2011719,37.5175781 17.3261719,37.5175781 L29.5488281,37.5175781 C30.6738281,37.5175781 31.5878906,37.3535156 31.5878906,36.2285156 C31.5878906,35.1035156 30.6738281,34.9394531 29.5488281,34.9394531 Z" id="section" fill="#FFFFFF"></path>
                <path d="M11.34375,16.3886719 C10.7636719,16.3886719 10.2890625,15.9140625 10.2890625,15.3339844 L10.2890625,14.7539062 C10.2890625,12.0644531 12.4804688,9.87304688 15.1699219,9.87304688 L16.1132812,9.87304688 C16.6933594,9.87304688 17.1679688,10.3476562 17.1679688,10.9277344 C17.1679688,11.5078125 16.6933594,11.9824219 16.1132812,11.9824219 L15.1640625,11.9824219 C13.6347656,11.9824219 12.3925781,13.2246094 12.3925781,14.7539062 L12.3925781,15.3339844 C12.3984375,15.9140625 11.9238281,16.3886719 11.34375,16.3886719 Z M11.34375,20.4667969 C10.7636719,20.4667969 10.2890625,19.9921875 10.2890625,19.4121094 L10.2890625,18.796875 C10.2890625,18.2167969 10.7636719,17.7421875 11.34375,17.7421875 C11.9238281,17.7421875 12.3984375,18.2167969 12.3984375,18.796875 L12.3984375,19.4121094 C12.3984375,19.9921875 11.9238281,20.4667969 11.34375,20.4667969 Z" id="highlight" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg> -->
<img src="/images/favicon.ico" alt="">
                <p class="inline-block font-semibold ml-1 text-grey-dark">
                    FireApp
                </p>
            </a>
            
            <div class="switch">
                <input type="checkbox" name="1" id="1" v-model="sidebar" class="switch-checkbox" />
                <label class="switch-label" for="1"></label>
            </div>
        </div>


    </nav>
</div>            
            <internal-search-box 
            v-if="searchBox"
            @close="searchBox = false"
            version="2.0"
        ></internal-search-box>
                
            <div>
	<div class="sidebar" :class="[{'is-hidden': ! sidebar}]">
    <ul>
<li>
<h2>Get Started</h2>
<ul>
<li><a href="setup-android.html">Setup Android Project</a></li>
<li><a href="setup-firebase.html">Setup Firebase</a></li>
<li><a href="cloud-functions.html">Setup Backend - Cloud Functions</a></li>
<li><a href="sha1.html">Adding your SHA1 Key</a></li>
<li><a href="enable-agora.html">Enable Video &amp; Voice Calls</a></li>
<li><a href="maps-location.html">Maps &amp; Location</a></li>
<li><a href="translation.html">Translating</a></li>
<li><a href="notes-and-troubleshooting.html">Notes &amp; Troubleshooting</a></li>

<li><a href="encryption-notes.html">Notes regarding Encryption</a></li>
<li><a href="add-testing-numbers.html">Add Testing Numbers</a></li>
</ul>
</li>
</ul>
</div>	
	<div class="documentation is-dark" :class="{'expanded': ! sidebar}">
		<h1>Setting up Firebase</h1>
<hr />
<ul>
<li><a href="#section-1">Setup and Create Firebase Project</a></li>
<li><a href="#section-2">Enable Phone Authentication</a></li>
<li><a href="#section-3">Uploading Default Images</a></li>
<li><a href="#section-4">Firebase Database Security Rules</a></li>
<li><a href="#section-5">Force Update Mode</a></li>
</ul>
<p><a name="section-1"></a></p>
<h2>Setup and Create Firebase Project</h2>
<p>since this app was built using Firebase ,you have to create a New Project on Firebase by going to <a href="https://console.firebase.google.com/">Firebase Console</a> then sign in using your google account if your'e not signed in , then create a new Project and set the name you like for the project, then:</p>
<ul>
<li>click on Add Firebase to your Android app</li>
<li>copy the applicationId from your build.gradle and paste it as Android Package Name </li>
</ul>
<p><img src="../images/firebase-getting-started.png" alt="image" /></p>
<ul>
<li>Click on Register App &gt; Next</li>
<li>click on Download <code>google-services.json</code>. it will download a <code>.json</code> file we will use it later </li>
</ul>
<p><img src="../images/firebase-getting-started-2.png" alt="image" /></p>
<ul>
<li>you can skip the remaining setup steps </li>
<li>next up copy the downloaded <code>google-services.json</code> and paste it in the path
<code>FireApp - Android App\app\</code> to make sure that your app is linked with your Firebase Project</li>
</ul>
<p><a name="section-2"></a></p>
<h2>Enable Phone Authentication</h2>
<p>next up you have to Enable Phone Authentication in Firebase Console by going to :</p>
<ul>
<li>Authentication</li>
<li>Sign-In Method</li>
<li>click on Phone</li>
<li>enable it then save</li>
</ul>
<p><img src="../images/firebase-getting-started-3.png" alt="image" /></p>
<p><a name="section-3"></a></p>
<h2>Uploading Default Images</h2>
<blockquote>
<p>{warning} if you did not upload these images you will see an error while registering after confirming your phone number</p>
</blockquote>
<p>now you have to upload the default user image, this image is used by default when a user registered in the app for the first time and he did not pick a Profile image.</p>
<p>to do that go to Firebase Console &gt; Storage then click on Upload File.
you can upload your own default user profile photo or you can upload the included image in <code>Firebase Console - Files\default_user_img.png</code></p>
<p>after uploading, click on the uploaded image &gt; Expand File Location &gt; click on <code>Download URL</code>. this will copy the uploaded url to save it in Database later. </p>
<p><img src="../images/firebase-getting-started-5.png" alt="image" /></p>
<p>go to Database and add a new node by hitting the little plus icon </p>
<p><img src="../images/firebase-getting-started-6.png" alt="image" /></p>
<p>(choose Firebase Realtime Database if prompted)</p>
<p>then type the key name: <code>defaultUserProfilePhoto</code> and paste in the copied url as the value . like This
<img src="../images/firebase-getting-started-7.png" alt="image" /></p>
<p>now we have to do the same thing for <code>defaultGroupProfilePhoto</code>:
upload your image or upload the included image in <code>Firebase Console - Files\default_group_profile.png</code></p>
<p><img src="../images/firebase-getting-started-7.0.1.png" alt="image" />
<img src="../images/firebase-getting-started-7.1.png" alt="image" /></p>
<p><a name="section-4"></a></p>
<h2>Firebase Database Security Rules</h2>
<p>go to 'Database' &gt; Rules  (choose Firebase Realtime Database if prompted)</p>
<p>now you have two options to secure your Database:</p>
<blockquote>
<p>{warning} if you did not define Security rules the app will not work and you will face some issues while registering for the first time</p>
</blockquote>
<ol>
<li>Default Security </li>
</ol>
<p>copy the following rules and replace them ,then click 'Publish'</p>
<pre><code class="language-json">{
  "rules": {
 ".write":"auth!=null",
   ".read":"auth!=null"
  }
}</code></pre>
<ol start="2">
<li>More Secure Database</li>
</ol>
<p>go to Downloaded Files &gt; Firebase Console - Files &gt; and open up <code>Firebase-security-rules.txt</code> then copy all of its content and paste it in Firebase Rules</p>
<p><img src="../images/firebase-getting-started-4.png" alt="image" /></p>
<p><a name="section-5"></a></p>
<h2>Force Update Mode</h2>
<p>starting FireApp Version 1.3.1 we introduced <strong>Force Update Mode</strong> which forces the user to update the app on his device.
to enable that go to Firebase Console &gt; Database &gt; create a new node by clicking on the little plus icon then add it like the following</p>
<p><img src="../images/force-update-mode-fireapp.png" alt="image" /></p>
<p>now let's explain these things:</p>
<ul>
<li>latestVersion: the latest version of the app, we use <code>versionCode</code> which is included in <code>build.gradle</code> file.</li>
<li>versionsToUpdate: specifies which versions needed to update</li>
<li>updateCondition: we use four conditions to check whether there is an update required
<ul>
<li><code>ONLY</code>: show the Force mode ONLY if versionsToUpdate == the client's current version </li>
<li><code>AND_ABOVE</code>: show the Force mode ONLY if versionsToUpdate &gt;= the client's current version </li>
<li><code>AND_BELOW</code>: show the Force mode ONLY if versionsToUpdate &lt;= the client's current version </li>
<li><code>NONE</code>: this is a kill switch if something goes wrong you can set <code>NONE</code> so you can disable update mode for the clients.</li>
</ul></li>
</ul>
<p>please make sure to type the conditions EXACTLY as above as it is case-sensitive.</p>
			</div>
</div>

            <larecipe-back-to-top></larecipe-back-to-top>
        </div>


        <script>
            window.config = [];
        </script>

        <script src="../vendor/binarytorch/larecipe/assets/js/app.js"></script>

        <script>
            window.LaRecipe = new CreateLarecipe(config)
        </script>

        
                

        
        <script>
            LaRecipe.run()
        </script>
    </body>

</html>
