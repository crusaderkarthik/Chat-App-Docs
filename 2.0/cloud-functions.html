<!doctype html>
<html>
    


<head>
        
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Setup Backend - Cloud Functions | FireApp</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        
        <meta name="author" content="">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="twitter:card" value="summary">
                    <link rel="canonical" href="http://2.0/cloud-functions" />
                                                                                            <meta property="og:type" content="article" />
                                                                                                                        
        
        <link rel="stylesheet" href="../vendor/binarytorch/larecipe/assets/css/app.css">

        
        <link rel="apple-touch-icon" href="//images/favicon.ico">
<link rel="shortcut icon" type="image/png" href="//images/favicon.ico"/>
        
        
        <style>
    :root {
        --primary: #787AF6;
        --secondary: #2b9cf2;
    }

    :not(pre)>code[class*=language-], pre[class*=language-] {
        border-top: 3px solid #787AF6;
    }
    
    .bg-gradient-primary {
        background: linear-gradient(87deg, #787AF6 0, #2b9cf2 100%) !important;
    }

    [v-cloak] > * { 
        display: none; 
    }
    
    [v-cloak]::before { 
        content: " ";
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #F2F6FA;
    }
</style>
        <!-- CSRF Token -->
        <meta name="csrf-token" content="xWufmeFvKgtGACwcii247vd5477GSXCZoqnqb1Rp">

            </head>
    <body>
        <div id="app" v-cloak>
            <div class="fixed pin-t pin-x z-40">
    <div class="bg-gradient-primary text-white h-1"></div>
    
    <nav class="flex items-center justify-between text-black bg-navbar shadow-xs h-16">
        <div class="flex items-center flex-no-shrink">
           <a href="" class="flex items-center flex-no-shrink text-black mx-4">
                <!-- <svg height="30px" viewBox="0 0 46 46" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Jelly-icons" transform="translate(-647.000000, -437.000000)" fill-rule="nonzero">
            <g id="coupon" transform="translate(640.000000, 430.000000)">
                <rect id="range" fill="#000000" opacity="0" x="0" y="0" width="60" height="60"></rect>
                <path d="M7.67578125,12.7324219 L7.67578125,43.78125 C7.67578125,49.4414062 10.4765625,51.1289062 10.4765625,51.1289062 C12.0234375,52.6699219 14.53125,52.6699219 16.078125,51.1289062 C17.625,49.5878906 20.1328125,49.5878906 21.6796875,51.1289062 C23.2265625,52.6699219 25.734375,52.6699219 27.28125,51.1289062 C28.828125,49.5878906 31.3359375,49.5878906 32.8828125,51.1289062 C34.4296875,52.6699219 36.9375,52.6699219 38.484375,51.1289062 C40.03125,49.5878906 42.5390625,49.5878906 44.0859375,51.1289062 C45.6328125,52.6699219 48.140625,52.6699219 49.6875,51.1289062 C49.6875,51.1289062 52.4882812,49.2128906 52.4882812,43.78125 C52.4882812,38.3496094 52.4765625,12.7324219 52.4765625,12.7324219 C52.4765625,9.83789063 50.1152344,7.49414063 47.2089844,7.49414063 L12.9316406,7.49414063 C10.0371094,7.49414063 7.67578125,9.83789063 7.67578125,12.7324219 Z" id="appearance" fill="#787AF6"></path>
                <path d="M17.3261719,16.5996094 C16.2011719,16.5996094 15.2871094,17.5136719 15.2871094,18.6386719 L15.2871094,21.2109375 C15.2871094,22.3359375 16.2011719,23.25 17.3261719,23.25 L45.8496094,23.25 C46.9746094,23.25 47.8886719,22.3359375 47.8886719,21.2109375 L47.8886719,18.6386719 C47.8886719,17.5136719 46.9746094,16.5996094 45.8496094,16.5996094 L17.3261719,16.5996094 Z M29.5488281,27.8085938 L17.3261719,27.8085938 C16.2011719,27.8085938 15.2871094,27.9726562 15.2871094,29.0976562 C15.2871094,30.2226562 16.2011719,30.3867188 17.3261719,30.3867188 L29.5488281,30.3867188 C30.6738281,30.3867188 31.5878906,30.2226562 31.5878906,29.0976562 C31.5878906,27.9726562 30.6738281,27.8085938 29.5488281,27.8085938 Z M29.5488281,34.9394531 L17.3261719,34.9394531 C16.2011719,34.9394531 15.2871094,35.1035156 15.2871094,36.2285156 C15.2871094,37.3535156 16.2011719,37.5175781 17.3261719,37.5175781 L29.5488281,37.5175781 C30.6738281,37.5175781 31.5878906,37.3535156 31.5878906,36.2285156 C31.5878906,35.1035156 30.6738281,34.9394531 29.5488281,34.9394531 Z" id="section" fill="#FFFFFF"></path>
                <path d="M11.34375,16.3886719 C10.7636719,16.3886719 10.2890625,15.9140625 10.2890625,15.3339844 L10.2890625,14.7539062 C10.2890625,12.0644531 12.4804688,9.87304688 15.1699219,9.87304688 L16.1132812,9.87304688 C16.6933594,9.87304688 17.1679688,10.3476562 17.1679688,10.9277344 C17.1679688,11.5078125 16.6933594,11.9824219 16.1132812,11.9824219 L15.1640625,11.9824219 C13.6347656,11.9824219 12.3925781,13.2246094 12.3925781,14.7539062 L12.3925781,15.3339844 C12.3984375,15.9140625 11.9238281,16.3886719 11.34375,16.3886719 Z M11.34375,20.4667969 C10.7636719,20.4667969 10.2890625,19.9921875 10.2890625,19.4121094 L10.2890625,18.796875 C10.2890625,18.2167969 10.7636719,17.7421875 11.34375,17.7421875 C11.9238281,17.7421875 12.3984375,18.2167969 12.3984375,18.796875 L12.3984375,19.4121094 C12.3984375,19.9921875 11.9238281,20.4667969 11.34375,20.4667969 Z" id="highlight" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg> -->
<img src="/images/favicon.ico" alt="">
                <p class="inline-block font-semibold ml-1 text-grey-dark">
                    FireApp
                </p>
            </a>
            
            <div class="switch">
                <input type="checkbox" name="1" id="1" v-model="sidebar" class="switch-checkbox" />
                <label class="switch-label" for="1"></label>
            </div>
        </div>

        
    </nav>
</div>            
            <internal-search-box 
            v-if="searchBox"
            @close="searchBox = false"
            version="2.0"
        ></internal-search-box>
                
            <div>
	<div class="sidebar" :class="[{'is-hidden': ! sidebar}]">
    <ul>
<li>
<h2>Get Started</h2>
<ul>
<li><a href="setup-android.html">Setup Android Project</a></li>
<li><a href="setup-firebase.html">Setup Firebase</a></li>
<li><a href="cloud-functions.html">Setup Backend - Cloud Functions</a></li>
<li><a href="sha1.html">Adding your SHA1 Key</a></li>
<li><a href="enable-agora.html">Enable Video &amp; Voice Calls</a></li>
<li><a href="maps-location.html">Maps &amp; Location</a></li>
<li><a href="translation.html">Translating</a></li>
<li><a href="notes-and-troubleshooting.html">Notes &amp; Troubleshooting</a></li>

<li><a href="encryption-notes.html">Notes regarding Encryption</a></li>
<li><a href="add-testing-numbers.html">Add Testing Numbers</a></li>
</ul>
</li>
</ul>
</div>	
	<div class="documentation is-dark" :class="{'expanded': ! sidebar}">
		<h1>Setup Backend - Cloud Functions</h1>
<hr />
<ul>
<li><a href="#section-1">Setup Backend - Cloud Functions</a></li>
</ul>
<p><a name="section-1"></a></p>
<h2>Setup Backend - Cloud Functions</h2>
<blockquote>
<p>{warning} if you did not deploy Cloud Functions you will see no users.
<a href="notes-and-troubleshooting.html">more info</a></p>
</blockquote>
<p>download the <a href="https://nodejs.org/en/">NodeJS (<strong>LTS</strong> Version)</a> and install it on your Computer.
then open Command Prompt or Terminal on your computer and type the command</p>
<pre><code class="language-javascript">npm install -g firebase-tools</code></pre>
<p>** if you are on a Mac type in </p>
<pre><code class="language-javascript">sudo npm install -g firebase-tools</code></pre>
<p>this will install the firebase tools which is used to deploy your functions
next up create a new Folder on your computer.</p>
<h2>CD Into the directory</h2>
<p>now we want to execute commands within the Functions directory, to do that you can:</p>
<ul>
<li>if you're on Windows hold 'shift' then 'Right-click' and choose 'open command window here' to open up a command prompt in this folder
OR
you can use this trick to make it easier for you:</li>
</ul>
<p>open the <code>'Backend - Cloud Functions'</code> &gt; go the top bar &gt; and then type in <code>cmd</code> and hit enter. this should open up a CMD window within the designated folder</p>
<p><img src="../images/cloud-functions-cmd.png" alt="image" /></p>
<ul>
<li>otherwise, you can just open CMD/Terminal and then type in <code>cd</code> and then drag the Backend-Cloud Functions folder and hit enter</li>
</ul>
<p>then type the command: </p>
<pre><code class="language-javascript">firebase login</code></pre>
<p>this will open up the Browser on your Computer to associate the Functions on your PC with Firebase Project
then type the command: </p>
<pre><code class="language-javascript">firebase init functions</code></pre>
<p>this will link your cloud functions with your firebase Project that you've created before.
it will also create a <strong>'functions'</strong> directory which you will paste the files in later.</p>
<p>now complete the steps in command line and choose the Project that you've Created
<img src="../images/firebase-cloud-functions-setup-1.png" alt="image" /></p>
<p>then choose JavaScript as the language , don't use ESLint , and don't install dependencies </p>
<p>now we have to deploy our functions to Firebase.</p>
<ul>
<li>but first you need to add your package name by going to <code>'Backend - Cloud Functions'</code> &gt; <code>index.js</code> and open it with any text editor, then add package name in the constant <code>packageName</code>.</li>
</ul>
<p><img src="../../2.0/cloud-functions-package-name.png" alt="image" /></p>
<p>now copy the follwoing files:</p>
<ul>
<li>
<p>index.js</p>
</li>
<li>
<p>push-token-sender.js</p>
</li>
<li>
<p>message-sender.js</p>
</li>
<li>
<p>generate-virgil-jwt.js</p>
</li>
<li>
<p>package.json </p>
<p>from <code>'Backend - Cloud Functions'</code> folder and paste them in the project folder that you've created in 'functions' directory and replace them</p>
</li>
<li>
<p>assuming your cmd is already in 'Backend - Cloud Functions' folder, type in the command
<code>cd functions</code> </p>
</li>
</ul>
<ul>
<li>then type the command</li>
</ul>
<pre><code class="language-javascript">npm install</code></pre>
<ul>
<li>finally run the command 
<pre><code class="language-javascript">firebase deploy</code></pre></li>
</ul>
<p>you should see something like this if deploy process was succeeded(Note that it should SHOW ALL functions Names) </p>
<p><img src="../images/firebase-cloud-functions-setup-2.png" alt="image" /></p>
<p>sometimes a network error may occur and functions may be partially deployed, if that happened it will show up in the CMD.</p>
<p>to fix that just copy these lines highlighted by CMD and paste it in</p>
<p><img src="../images/cloud-functions-error-fix-cmd.png" alt="image" /></p>
<blockquote>
<p>{warning} you should be on <strong>Blaze Plan</strong> to deploy Cloud Functions.</p>
</blockquote>
			</div>
</div>

            <larecipe-back-to-top></larecipe-back-to-top>
        </div>


        <script>
            window.config = [];
        </script>

        <script src="../vendor/binarytorch/larecipe/assets/js/app.js"></script>

        <script>
            window.LaRecipe = new CreateLarecipe(config)
        </script>

        
                

        
        <script>
            LaRecipe.run()
        </script>
    </body>


</html>
